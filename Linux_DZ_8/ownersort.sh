#!/bin/bash

# Проверяем, передан ли путь к исходной папке
if [ -z "$1" ]; then
    echo "Ошибка: Пожалуйста, укажите путь к исходной папке."
    exit 1
fi

# Проверяем, существует ли исходная папка
if [ ! -d "$1" ]; then
    echo "Ошибка: Исходная папка $1 не существует."
    exit 1
fi

# Переходим в исходную папку
cd "$1" || exit 1

# Перебираем файлы в исходной папке
for file in *; do
    # Проверяем, является ли элемент файлом (не директорией)
    if [ -f "$file" ]; then
        # Получаем имя владельца файла
        owner=$(stat -c "%U" "$file")

        # Проверяем, существует ли директория с именем владельца
        if [ ! -d "$owner" ]; then
            # Если нет, создаем директорию
            mkdir "$owner"
        fi

        # Копируем файл в директорию с именем владельца
        cp "$file" "$owner/"
        echo "Скопирован файл $file в директорию $owner/"
    fi
done

echo "Операция завершена."
